<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>SigmaDox – Personal Website</title>
    <meta
      name="description"
      content="My name is SigmaDox, I’m an award-winning web dev / digital designer and full stack software engineer. I have a passion for all things technology and design, from software engineering & machine learning to UI/UX & 3D graphics."
    />
    <link rel="icon" type="image/png" href="https://placehold.co/32x32/f6d4b1/000000?text=SD" />

    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0,viewport-fit=cover"
    />
    <link rel="apple-touch-icon" sizes="180x180" href="https://placehold.co/180x180/f6d4b1/000000?text=SD" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-title"
      content="SigmaDox – Personal Website"
    />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="theme-color" content="#f6d4b1" />

    <meta property="og:title" content="SigmaDox – Personal Website" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://sigmadox.dev/" />
    <meta property="og:image" content="https://placehold.co/1200x630/f6d4b1/000000?text=SigmaDox" />
    <meta
      name="og:description"
      content="My name is SigmaDox, I’m an award-winning web dev / digital designer and full stack software engineer. I have a passion for all things technology and design, from software engineering & machine learning to UI/UX & 3D graphics."
    />
    <link rel="manifest" href="/manifest.json" />

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
      /* Custom CSS for base styles and specific overrides not easily done with Tailwind */
      :root {
        --primary-color: #f6d4b1;
        --secondary-color: #333;
        --text-color: #333;
        --link-color: #007bff;
        --link-hover-color: #0056b3;
      }

      body {
        font-family: 'Inter', sans-serif;
        color: var(--text-color);
        background-color: #f0f0f0; /* Light background */
        line-height: 1.6;
        scroll-behavior: smooth;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        overflow-x: hidden; /* Prevent horizontal scroll */
      }

      /* Ensure canvas takes full width and height of its container */
      .webgl {
        position: absolute;
        top: 0;
        left: 0;
        outline: none;
        z-index: 0; /* Behind other content */
      }

      /* Styling for the loading screen */
      #loading {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background-color: #1a1a1a;
        color: var(--primary-color);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 1000;
        transition: opacity 1s ease-out;
      }

      #loading.hidden {
        opacity: 0;
        pointer-events: none;
      }

      #loading-bar {
        width: 80%;
        max-width: 400px;
        height: 8px;
        background-color: #555;
        border-radius: 4px;
        overflow: hidden;
        margin-top: 1rem;
      }

      #loading-bar-progress {
        width: 0%;
        height: 100%;
        background-color: var(--primary-color);
        transition: width 0.5s ease-in-out;
      }

      #loading-items {
        margin-top: 0.5rem;
        font-size: 0.9rem;
      }

      /* Navigation specific styles */
      nav {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem;
        background-color: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(5px);
        z-index: 50;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      .menu-btn {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .menu-btn .btn {
        background-color: var(--primary-color);
        color: var(--text-color);
        padding: 0.5rem 0.75rem;
        border-radius: 0.5rem;
        transition: background-color 0.3s ease, transform 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .menu-btn .btn:hover {
        background-color: #e0c29f;
        transform: translateY(-2px);
      }

      .menu-btn svg {
        fill: currentColor;
      }

      .menu-body {
        display: none; /* Hidden by default */
        flex-direction: column;
        position: absolute;
        top: 100%; /* Below the nav bar */
        left: 0;
        width: 100%;
        background-color: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(5px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        padding: 1rem 0;
      }

      nav.active .menu-body {
        display: flex; /* Show when active */
      }

      .menu-body a {
        padding: 0.75rem 1.5rem;
        color: var(--text-color);
        text-decoration: none;
        transition: background-color 0.3s ease, transform 0.2s ease;
      }

      .menu-body a:hover {
        background-color: var(--primary-color);
        transform: translateY(-2px);
      }

      #tip-scroll {
        display: none; /* Hidden by default, can be shown with JS */
        position: fixed;
        bottom: 1rem;
        right: 1rem;
        background-color: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 0.5rem;
        font-size: 0.8rem;
        z-index: 40;
      }

      /* Hero backup for non-WebGL or initial load */
      #hero-backup {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        color: var(--primary-color);
        z-index: 1;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
      }
      #hero-backup h1 {
        font-size: 3rem;
        font-weight: 700;
      }
      #hero-backup h3 {
        font-size: 1.5rem;
        font-weight: 400;
      }
      #hero-backup ul {
        list-style: none;
        padding: 0;
        margin-top: 0.5rem;
        font-size: 1.1rem;
      }

      /* Main content sections */
      main {
        position: relative;
        z-index: 10; /* Above WebGL canvas */
        padding-top: 5rem; /* Space for fixed nav */
      }

      section {
        max-width: 800px;
        margin: 2rem auto;
        padding: 2rem;
        background-color: white;
        border-radius: 1rem;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        opacity: 0; /* Hidden by default for animation */
        transform: translateY(20px); /* Start slightly below */
        transition: opacity 0.8s ease-out, transform 0.8s ease-out;
      }

      section.animated {
        opacity: 1;
        transform: translateY(0);
      }

      section h1 {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 1.5rem;
        text-align: center;
        color: var(--secondary-color);
      }

      section h2 {
        font-size: 2rem;
        font-weight: 600;
        margin-top: 2rem;
        margin-bottom: 0.5rem;
        color: var(--secondary-color);
      }

      section h3 {
        font-size: 1.25rem;
        font-weight: 400;
        margin-bottom: 1rem;
        color: #666;
      }

      section p {
        margin-bottom: 1rem;
      }

      section a {
        color: var(--link-color);
        text-decoration: none;
        transition: color 0.3s ease;
      }

      section a:hover {
        color: var(--link-hover-color);
        text-decoration: underline;
      }

      .skills {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        list-style: none;
        padding: 0;
        margin-bottom: 1.5rem;
      }

      .skills li {
        background-color: var(--primary-color);
        padding: 0.3rem 0.8rem;
        border-radius: 0.5rem;
        font-size: 0.9rem;
        font-weight: 600;
        color: var(--text-color);
        transition: transform 0.2s ease;
      }

      .skills li:hover {
        transform: translateY(-2px);
      }

      hr {
        border: none;
        border-top: 1px solid #eee;
        margin: 2rem 0;
      }

      .image {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        margin-top: 1.5rem;
        margin-bottom: 1.5rem;
        border-radius: 0.75rem;
        overflow: hidden; /* Ensure rounded corners apply to children */
      }

      .image img,
      .image video,
      .image iframe {
        width: 100%;
        height: auto;
        border-radius: 0.75rem; /* Apply rounded corners to media */
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }

      .image img:hover,
      .image video:hover,
      .image iframe:hover {
        transform: scale(1.01);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
      }

      .collapse-btn {
        background-color: var(--primary-color);
        color: var(--text-color);
        padding: 0.75rem 1.5rem;
        border-radius: 0.5rem;
        border: none;
        cursor: pointer;
        font-weight: 600;
        transition: background-color 0.3s ease, transform 0.2s ease;
        display: block; /* Make it a block element */
        margin: 1rem auto; /* Center the button */
      }

      .collapse-btn:hover {
        background-color: #e0c29f;
        transform: translateY(-2px);
      }

      .collapse-body {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.5s ease-out;
      }

      .collapse-btn[collapsed="false"] + .collapse-body {
        max-height: 500px; /* Adjust as needed for content */
      }

      footer {
        text-align: center;
        padding: 2rem;
        margin-top: 3rem;
        background-color: var(--secondary-color);
        color: white;
        font-size: 0.85rem;
        border-top-left-radius: 1rem;
        border-top-right-radius: 1rem;
      }

      footer div {
        margin-bottom: 0.5rem;
      }

      /* Responsive adjustments */
      @media (min-width: 768px) {
        nav {
          padding: 1rem 2rem;
        }
        .menu-btn {
          gap: 1rem;
        }
        .menu-body {
          position: static;
          flex-direction: row;
          display: flex !important; /* Always show on desktop */
          background-color: transparent;
          box-shadow: none;
          padding: 0;
        }
        .menu-body a {
          padding: 0.5rem 1rem;
        }
        .menu-btn > button {
          display: none; /* Hide hamburger on desktop */
        }
        #hero-backup h1 {
          font-size: 5rem;
        }
        #hero-backup h3 {
          font-size: 2rem;
        }
        #hero-backup ul {
          font-size: 1.5rem;
        }
        section {
          padding: 3rem;
          margin: 4rem auto;
        }
        section h1 {
          font-size: 3.5rem;
        }
        section h2 {
          font-size: 2.5rem;
        }
        section h3 {
          font-size: 1.5rem;
        }
      }
    </style>
  </head>

  <body>
    <!-- Loading Screen -->
    <div id="loading">
      <h2 class="text-2xl md:text-3xl font-bold">Booting...</h2>
      <div id="loading-bar">
        <div id="loading-bar-progress"></div>
      </div>
      <div id="loading-items" class="text-sm md:text-base">Starting...</div>
    </div>

    <!-- 3D WebGL Canvas -->
    <canvas class="webgl"></canvas>

    <!-- Hero Backup (visible if WebGL fails or initially) -->
    <div id="hero-backup" class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-center text-primary-color z-10">
      <h3 class="text-2xl md:text-3xl font-light">Hi there, I’m</h3>
      <h1 class="text-6xl md:text-8xl font-extrabold">SigmaDox</h1>
      <ul class="list-none p-0 m-0 text-xl md:text-2xl font-medium">
        <li>Software Engineer</li>
        <li>Digital Designer</li>
      </ul>
    </div>

    <!-- Navigation Bar -->
    <nav class="fixed top-0 left-0 w-full flex justify-between items-center p-4 bg-white bg-opacity-90 backdrop-blur-sm shadow-md z-50 rounded-b-lg">
      <div class="menu-btn flex items-center space-x-2">
        <button class="btn p-2 rounded-lg bg-primary-color text-text-color transition-colors hover:bg-opacity-80 md:hidden" onclick="toggleMenu()">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <rect y="3" width="24" height="3"></rect>
            <rect y="10" width="24" height="3"></rect>
            <rect y="17" width="24" height="3"></rect>
          </svg>
        </button>
        <div class="flex space-x-2">
          <a class="btn p-2 rounded-lg bg-primary-color text-text-color transition-colors hover:bg-opacity-80" href="https://www.linkedin.com/in/edwardhinrichsen/" target="_blank" aria-label="LinkedIn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M20.447 20.447h-3.526v-5.592c0-1.33-.473-2.242-1.677-2.242-1.33 0-2.12.898-2.467 1.764-.13.31-.162.748-.162 1.186v4.884h-3.526s.046-9.617 0-10.609h3.526v1.503c.465-.72 1.306-1.748 3.17-1.748 2.31 0 4.044 1.517 4.044 4.753v6.098zM5.337 9.332a2.03 2.03 0 01-2.03-2.03c0-1.12.91-2.03 2.03-2.03s2.03.91 2.03 2.03c0 1.12-.91 2.03-2.03 2.03zm1.763 11.115h-3.526v-10.609h3.526v10.609z"></path>
            </svg>
          </a>
          <a class="btn p-2 rounded-lg bg-primary-color text-text-color transition-colors hover:bg-opacity-80" href="https://bsky.app/profile/edh.dev/" target="_blank" aria-label="Bluesky">
            <svg viewBox="0 0 64 57" width="20" height="17.76" fill="currentColor">
              <path d="M13.873 3.805C21.21 9.332 29.103 20.537 32 26.55v15.882c0-.338-.13.044-.41.867-1.512 4.456-7.418 21.847-20.923 7.944-7.111-7.32-3.819-14.64 9.125-16.85-7.405 1.264-15.73-.825-18.014-9.015C1.12 23.022 0 8.51 0 6.55 0-3.268 8.579-.182 13.873 3.805ZM50.127 3.805C42.79 9.332 34.897 20.537 32 26.55v15.882c0-.338.13.044.41.867 1.512 4.456 7.418 21.847 20.923 7.944 7.111-7.32 3.819-14.64-9.125-16.85 7.405 1.264 15.73-.825 18.014-9.015C62.88 23.022 64 8.51 64 6.55c0-9.818-8.578-6.732-13.873-2.745Z"></path>
            </svg>
          </a>
          <a class="btn p-2 rounded-lg bg-primary-color text-text-color transition-colors hover:bg-opacity-80" href="https://github.com/edhinrichsen/retro-computer-website" target="_blank" aria-label="GitHub">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.6.11 1.02-.26 1.02-.577v-2.234c-3.338.726-4.042-1.61-4.042-1.61-.542-1.372-1.328-1.739-1.328-1.739-1.087-.745.084-.729.084-.729 1.205.084 1.838 1.237 1.838 1.237 1.07 1.835 2.809 1.305 3.492.997.108-.775.418-1.305.762-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.382 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1-.322 3.3 1.235.96-.267 1.98-.399 3-.399s2.04.132 3 .399c2.295-1.557 3.295-1.235 3.295-1.235.645 1.653.24 2.873.105 3.176.77.838 1.235 1.91 1.235 3.22 0 4.61-2.801 5.62-5.471 5.922.429.369.812 1.101.812 2.219v3.293c0 .319.413.691 1.025.577C20.565 22.185 24 17.68 24 12c0-6.627-5.372-12-12-12z"></path>
            </svg>
          </a>
        </div>
      </div>

      <div class="menu-body hidden md:flex md:space-x-4" onclick="closeMenu()">
        <a class="text-text-color hover:text-primary-color transition-colors" href="#home">Home</a>
        <a class="text-text-color hover:text-primary-color transition-colors" href="#aboutMe">About</a>
        <a class="text-text-color hover:text-primary-color transition-colors" href="#contact">Contact</a>
      </div>

      <div id="tip-scroll" class="hidden md:block fixed bottom-4 right-4 bg-gray-800 text-white px-4 py-2 rounded-lg text-sm z-40">Scroll ↓</div>
    </nav>

    <!-- Main Content Sections -->
    <main class="relative z-10 pt-20">
      <section id="aboutMe" class="max-w-4xl mx-auto p-8 bg-white rounded-xl shadow-lg my-8">
        <h1 class="text-4xl font-bold mb-6 text-center text-secondary-color">Hi there</h1>
        <p class="mb-4">
          My name is SigmaDox, I’m an award-winning web dev / digital
          designer and full stack software engineer. I have a passion for all
          things technology and design, from software engineering & machine
          learning to UI/UX & 3D graphics.
        </p>
        <p class="mb-4">
          In addition to my love of technology and design, I am also interested
          in education, history, economics and politics.
        </p>
        <p>
          I leverage my fifteen plus years of coding experience to craft innovative and impactful digital experiences.
        </p>
      </section>

      <section id="contact" class="max-w-4xl mx-auto p-8 bg-white rounded-xl shadow-lg my-8">
        <h1 class="text-4xl font-bold mb-6 text-center text-secondary-color">Contact</h1>
        <p class="text-center text-lg">
          Reach out on
          <a href="https://www.linkedin.com/in/edwardhinrichsen/" class="text-blue-600 hover:underline font-bold"
            ><u>LinkedIn</u></a
          >
        </p>
      </section>
    </main>

    <!-- Placeholder for original textarea, purpose unclear but included -->
    <input type="text" id="textarea" readonly class="hidden" />

    <!-- Footer -->
    <footer class="text-center p-8 mt-12 bg-secondary-color text-white text-sm rounded-t-xl">
      <div class="mb-2">Developed + Designed by SigmaDox.</div>
      <div class="mb-2">Computer design based on the Commodore PET 8296.</div>
      <div class="mb-2">
        Built on the traditional land of the Wurundjeri and Boon Wurrung peoples
        of the Kulin nation. I pay my respect to Elders past, present and
        emerging.
      </div>
      <div class="mb-2">
        Sovereignty has never been ceded. It always was and always will be
        Aboriginal land.
      </div>
      <div>COPYRIGHT © 2022-2024 SigmaDox.</div>
    </footer>

    <!-- Three.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- webgl-helper.min.js (included as per original, but core 3D logic is standard Three.js) -->
    <script src="https://cdn-ts.netlify.app/webgl-helper@3.0.11/webgl-helper.min.js"></script>
    <!-- Google Analytics (as per original) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-EDNKHGV4HB"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-EDNKHGV4HB");
      gtag("event", "origin", { name: window.origin });
    </script>

    <script>
      // DOM Content Loaded: Ensure all HTML is parsed before running scripts
      document.addEventListener('DOMContentLoaded', () => {
        // --- Loading Screen Logic ---
        const loadingScreen = document.getElementById('loading');
        const loadingBarProgress = document.getElementById('loading-bar-progress');
        const loadingItems = document.getElementById('loading-items');
        const heroBackup = document.getElementById('hero-backup');
        const webglCanvas = document.querySelector('.webgl');

        let loadingProgress = 0;
        const loadingMessages = [
          'Initializing...',
          'Loading assets...',
          'Compiling shaders...',
          'Establishing connection...',
          'Boot sequence complete.'
        ];
        let messageIndex = 0;

        function updateLoadingScreen() {
          loadingProgress += 20; // Increment by 20% for each message
          loadingBarProgress.style.width = `${loadingProgress}%`;
          if (messageIndex < loadingMessages.length) {
            loadingItems.textContent = loadingMessages[messageIndex];
            messageIndex++;
          }
        }

        // Simulate loading progress
        const loadingInterval = setInterval(updateLoadingScreen, 500);

        // --- Navigation Menu Logic ---
        const nav = document.getElementsByTagName('nav')[0];

        window.toggleMenu = function() {
          nav.classList.toggle('active');
          // On mobile, if menu is open, hide scroll tip
          if (window.innerWidth < 768) { // Tailwind's md breakpoint
            const tipScroll = document.getElementById('tip-scroll');
            if (nav.classList.contains('active')) {
              tipScroll.classList.add('hidden');
            } else {
              tipScroll.classList.remove('hidden');
            }
          }
        };

        window.closeMenu = function() {
          nav.classList.remove('active');
          if (window.innerWidth < 768) { // Tailwind's md breakpoint
            document.getElementById('tip-scroll').classList.remove('hidden');
          }
        };

        // Hide menu on resize if it's open and switches to desktop view
        window.addEventListener('resize', () => {
          if (window.innerWidth >= 768) {
            nav.classList.remove('active');
            document.getElementById('tip-scroll').classList.add('hidden'); // Always hidden on desktop
          } else {
            // On mobile, if menu is closed, show scroll tip
            if (!nav.classList.contains('active')) {
              document.getElementById('tip-scroll').classList.remove('hidden');
            }
          }
        });

        // Initial check for scroll tip visibility
        if (window.innerWidth >= 768) {
          document.getElementById('tip-scroll').classList.add('hidden');
        } else {
          document.getElementById('tip-scroll').classList.remove('hidden');
        }


        // --- Collapse Button Logic (kept for potential future use or if any hidden collapse elements are added) ---
        document.querySelectorAll('.collapse-btn').forEach(button => {
          button.addEventListener('click', () => {
            const isCollapsed = button.getAttribute('collapsed') === 'true';
            button.setAttribute('collapsed', !isCollapsed);
            button.textContent = isCollapsed ? 'less...' : 'more...';
          });
        });

        // --- Three.js for 3D Retro Computer ---
        let scene, camera, renderer, computerMesh;
        let mouseX = 0, mouseY = 0;
        let targetX = 0, targetY = 0;
        let idleRotation = 0; // For continuous idle rotation
        const windowHalfX = window.innerWidth / 2;
        const windowHalfY = window.innerHeight / 2;

        function initThreeJS() {
          // 1. Scene
          scene = new THREE.Scene();
          scene.background = new THREE.Color(0x1a1a1a); // Dark background for retro feel

          // 2. Camera
          camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
          camera.position.z = 5;

          // 3. Renderer
          renderer = new THREE.WebGLRenderer({ canvas: webglCanvas, antialias: true });
          renderer.setSize(window.innerWidth, window.innerHeight);
          renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2)); // Optimize for device pixel ratio

          // 4. Lights
          const ambientLight = new THREE.AmbientLight(0xffffff, 0.5); // Soft white light
          scene.add(ambientLight);
          const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
          directionalLight.position.set(1, 1, 1).normalize();
          scene.add(directionalLight);

          // 5. Create a simple Retro Computer Model (using basic geometries)
          // Main body
          const bodyGeometry = new THREE.BoxGeometry(2.5, 1.5, 0.8);
          const bodyMaterial = new THREE.MeshStandardMaterial({ color: 0x4a4a4a, metalness: 0.5, roughness: 0.5 });
          const body = new THREE.Mesh(bodyGeometry, bodyMaterial);
          body.position.set(0, 0.2, 0); // Lift slightly

          // Screen
          const screenGeometry = new THREE.BoxGeometry(2.0, 1.0, 0.1);
          const screenMaterial = new THREE.MeshStandardMaterial({ color: 0x00ff00, emissive: 0x00ff00, emissiveIntensity: 0.2 }); // Green glow
          const screen = new THREE.Mesh(screenGeometry, screenMaterial);
          screen.position.set(0, 0.4, 0.4); // Position on top of the body

          // Keyboard base
          const keyboardGeometry = new THREE.BoxGeometry(2.2, 0.1, 0.6);
          const keyboardMaterial = new THREE.MeshStandardMaterial({ color: 0x3a3a3a, metalness: 0.5, roughness: 0.5 });
          const keyboard = new THREE.Mesh(keyboardGeometry, keyboardMaterial);
          keyboard.position.set(0, -0.4, 0.4); // Position in front of the body

          // Group them
          computerMesh = new THREE.Group();
          computerMesh.add(body);
          computerMesh.add(screen);
          computerMesh.add(keyboard);

          scene.add(computerMesh);

          // Initial rotation for a better view
          computerMesh.rotation.y = Math.PI * 0.1;
          computerMesh.rotation.x = Math.PI * 0.05;

          // Event Listeners for mouse interaction
          document.addEventListener('mousemove', onDocumentMouseMove);
          document.addEventListener('touchmove', onDocumentTouchMove);
          window.addEventListener('resize', onWindowResize);

          // Hide hero backup and loading screen
          heroBackup.classList.add('hidden');
          loadingScreen.classList.add('hidden');

          animate(); // Start the animation loop
        }

        function onDocumentMouseMove(event) {
          mouseX = (event.clientX - windowHalfX) / 100;
          mouseY = (event.clientY - windowHalfY) / 100;
          idleRotation = 0; // Reset idle rotation when mouse moves
        }

        function onDocumentTouchMove(event) {
          if (event.touches.length === 1) {
            event.preventDefault();
            mouseX = (event.touches[0].pageX - windowHalfX) / 100;
            mouseY = (event.touches[0].pageY - windowHalfY) / 100;
            idleRotation = 0; // Reset idle rotation when touch moves
          }
        }

        function onWindowResize() {
          camera.aspect = window.innerWidth / window.innerHeight;
          camera.updateProjectionMatrix();
          renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function animate() {
          requestAnimationFrame(animate);

          // Smoothly rotate the computer mesh based on mouse position
          targetX = mouseX * 0.001;
          targetY = mouseY * 0.001;

          if (computerMesh) {
            computerMesh.rotation.y += (targetX - computerMesh.rotation.y) * 0.05;
            computerMesh.rotation.x += (targetY - computerMesh.rotation.x) * 0.05;

            // Add subtle idle rotation if mouse is not moving much
            if (Math.abs(targetX - computerMesh.rotation.y) < 0.001 && Math.abs(targetY - computerMesh.rotation.x) < 0.001) {
                idleRotation += 0.0005; // Adjust speed as needed
                computerMesh.rotation.y += Math.sin(idleRotation) * 0.001;
                computerMesh.rotation.x += Math.cos(idleRotation * 0.5) * 0.0005;
            }
          }

          renderer.render(scene, camera);
        }

        // Delay the Three.js initialization to simulate loading time
        setTimeout(() => {
          clearInterval(loadingInterval); // Stop loading progress simulation
          loadingBarProgress.style.width = '100%';
          loadingItems.textContent = 'Ready!';
          setTimeout(() => {
            try {
              initThreeJS(); // Attempt to initialize Three.js
            } catch (e) {
              console.error("Failed to initialize Three.js:", e);
              // Fallback: Show hero backup if Three.js fails
              heroBackup.classList.remove('hidden');
              webglCanvas.classList.add('hidden'); // Hide canvas if it failed
              loadingScreen.classList.add('hidden');
            }
          }, 500); // Short delay after 'Ready!'
        }, loadingMessages.length * 500 + 500); // Total loading time + a bit more


        // --- Intersection Observer for Section Animations ---
        const sections = document.querySelectorAll('section');
        const observerOptions = {
          root: null, // viewport as the root
          rootMargin: '0px',
          threshold: 0.1 // Trigger when 10% of the section is visible
        };

        const sectionObserver = new IntersectionObserver((entries, observer) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.classList.add('animated');
              observer.unobserve(entry.target); // Stop observing once animated
            }
          });
        }, observerOptions);

        sections.forEach(section => {
          sectionObserver.observe(section);
        });

      }); // End DOMContentLoaded
    </script>
  </body>
</html>

